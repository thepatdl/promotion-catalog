<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; background: #f4f4f4; }
    header {
      background: #007bff; color: white; padding: 15px 20px;
      display: flex; justify-content: space-between; align-items: center;
    }
    .cart-btn {
      background: none; border: none; color: white; cursor: pointer;
      font-size: 18px; position: relative;
    }
    .cart-btn::after {
      content: attr(data-count); position: absolute;
      top: -8px; right: -10px; background: red;
      color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px;
    }
    h1 { margin: 0; font-size: 22px; }

    .catalog {
      display: flex; flex-wrap: wrap; gap: 20px;
      padding: 20px; justify-content: center;
    }
    .product-card {
      background: white; padding: 15px; border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1); width: 240px;
    }
    .product-name { font-size: 16px; font-weight: bold; }
    .product-code { font-size: 13px; color: gray; margin: 5px 0; }
    .product-price { color: green; font-weight: bold; }
    .add-button {
      margin-top: 10px; background: #28a745; color: white;
      padding: 8px; border: none; border-radius: 6px; cursor: pointer;
    }

    .modal {
      display: none; position: fixed; z-index: 99; left: 0; top: 0;
      width: 100%; height: 100%; overflow: auto;
      background-color: rgba(0,0,0,0.4);
    }
    .modal-content {
      background-color: white; margin: 10% auto; padding: 20px;
      border-radius: 10px; width: 80%; max-width: 500px;
    }
    .close { color: red; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }

    ul.cart-list { list-style: none; padding-left: 0; }
    ul.cart-list li {
      border-bottom: 1px solid #ddd; padding: 10px 0;
      display: flex; justify-content: space-between; align-items: center;
    }

    .remove-btn {
      background: red; color: white; border: none;
      padding: 4px 8px; border-radius: 5px; cursor: pointer;
      font-size: 12px;
    }

    .total-section {
      margin-top: 15px;
      font-weight: bold;
      font-size: 16px;
      text-align: right;
    }

    .send-btn {
      margin-top: 10px;
      width: 100%;
      background: #007bff;
      color: white;
      border: none;
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<header>
  <h1>‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h1>
  <button class="cart-btn" id="openCart" data-count="0">üõí</button>
</header>

<div class="catalog" id="catalog"></div>

<!-- Modal Cart -->
<div id="cartModal" class="modal">
  <div class="modal-content">
    <span class="close" id="closeCart">&times;</span>
    <h2>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h2>
    <ul class="cart-list" id="cartList"></ul>
    <div class="total-section" id="totalPrice">‡∏£‡∏ß‡∏°: ‡∏ø0</div>
    <button class="send-btn" onclick="sendToAdmin()">üì§ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</button>
  </div>
</div>

<script>
  const productData = [
    { code: "8854795000057", name: "(‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å)‡∏™‡∏∏‡∏£‡∏≤‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏á‡∏ä‡∏∏‡∏ô625ml Piece", price: 99 },
    { code: "8935040402854", name: "100Pipers‡∏ß‡∏¥‡∏™‡∏Å‡∏µ‡πâ1000ml Piece", price: 835 },
    { code: "8851123794589", name: "12PLUS‡πÅ‡∏õ‡πâ‡∏á‡πÄ‡∏¢‡πá‡∏ô‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå‡∏ï‡∏£‡πâ‡∏≤‡∏Ñ‡∏•‡∏π‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π140g Piece", price: 32 },
    { code: "8851123805414", name: "12PLUS‡πÅ‡∏õ‡πâ‡∏á‡πÄ‡∏¢‡πá‡∏ô‡πÑ‡∏ß‡∏ó‡πå‡πÄ‡∏ó‡∏ô‡∏ô‡∏¥‡πà‡∏á‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π140g Piece", price: 32 },
    { code: "8851123782005", name: "12plus‡πÇ‡∏Ñ‡πÇ‡∏•‡∏ç‡∏û‡πá‡∏≠‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï‡∏ä‡∏°‡∏û‡∏π20ml Piece", price: 35 },
    { code: "8851123803533", name: "12plus‡πÇ‡∏Ñ‡πÇ‡∏•‡∏ç‡∏û‡πá‡∏≠‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï‡∏û‡∏≤‡∏ß‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà20ml Piece", price: 39 },
    { code: "8851123782029", name: "12plus‡πÇ‡∏Ñ‡πÇ‡∏•‡∏ç‡∏û‡πá‡∏≠‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï‡∏°‡πà‡∏ß‡∏á20ml Piece", price: 35 },
    { code: "8851123389112", name: "12plus‡πÇ‡∏Ñ‡πÇ‡∏•‡∏ç‡∏°‡∏≠‡∏¢‡∏™‡πå‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ä‡∏°‡∏û‡∏π45ml Piece", price: 50 },
    { code: "8851123383110", name: "12plus‡πÇ‡∏£‡∏•‡∏≠‡∏≠‡∏ô‡∏Ñ‡∏≠‡∏•‡∏•‡∏≤‡πÄ‡∏à‡∏ô‡πÇ‡∏Å‡∏ß‡∏•‡πå32.5ml Piece", price: 49 },
    { code: "8851123809009", name: "12plus‡πÇ‡∏£‡∏•‡∏≠‡∏≠‡∏ô‡∏î‡∏±‡∏ö‡πÄ‡∏ö‡∏¥‡πâ‡∏•‡πÑ‡∏ß‡∏ó‡πå‡∏ä‡∏°‡∏û‡∏π25ml Piece", price: 49 },
    { code: "8851123789028", name: "12plus‡πÇ‡∏£‡∏•‡∏≠‡∏≠‡∏ô‡∏ü‡∏£‡∏∏‡πâ‡∏ï‡∏ï‡∏µ‡πâ‡πÑ‡∏ö‡∏£‡πå‡∏ó32.5ml Piece", price: 49 }
  ];

  const cart = [];

  const catalog = document.getElementById("catalog");
  const cartBtn = document.getElementById("openCart");
  const cartList = document.getElementById("cartList");
  const cartModal = document.getElementById("cartModal");
  const closeCart = document.getElementById("closeCart");
  const totalPriceElem = document.getElementById("totalPrice");

  function updateCartIcon() {
    const totalQty = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartBtn.setAttribute("data-count", totalQty);
  }

  function updateTotalPrice() {
    const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
    totalPriceElem.textContent = `‡∏£‡∏ß‡∏°: ‡∏ø${total}`;
  }

  function renderCart() {
    cartList.innerHTML = "";
    if (cart.length === 0) {
      cartList.innerHTML = "<li>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</li>";
      totalPriceElem.textContent = "‡∏£‡∏ß‡∏°: ‡∏ø0";
      return;
    }
    cart.forEach((item, index) => {
      const li = document.createElement("li");
      li.innerHTML = `
        <span>${item.name} - ‡∏ø${item.price} √ó ${item.quantity}</span>
        <button class="remove-btn" onclick="removeFromCart(${index})">‡∏•‡∏ö</button>
      `;
      cartList.appendChild(li);
    });
    updateTotalPrice();
  }

  function addToCart(product) {
    const existing = cart.find(item => item.code === product.code);
    if (existing) {
      existing.quantity += 1;
    } else {
      cart.push({ ...product, quantity: 1 });
    }
    updateCartIcon();
    renderCart();
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    updateCartIcon();
    renderCart();
  }

  function sendToAdmin() {
    const payload = cart.map(item => ({
      code: item.code,
      name: item.name,
      price: item.price,
      quantity: item.quantity
    }));
    const jsonData = JSON.stringify(payload, null, 2);
    alert("üì§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡∏´‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô:\n\n" + jsonData);
    // üü¶ TODO: ‡∏™‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô LINE OA / API ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
  }

  productData.forEach(product => {
    const card = document.createElement("div");
    card.className = "product-card";
    card.innerHTML = `
      <div class="product-name">${product.name}</div>
      <div class="product-code">‡∏£‡∏´‡∏±‡∏™: ${product.code}</div>
      <div class="product-price">‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏ø${product.price}</div>
      <button class="add-button">‡∏´‡∏¢‡∏¥‡∏ö‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
    `;
    card.querySelector(".add-button").addEventListener("click", () => addToCart(product));
    catalog.appendChild(card);
  });

  cartBtn.addEventListener("click", () => cartModal.style.display = "block");
  closeCart.addEventListener("click", () => cartModal.style.display = "none");
  window.addEventListener("click", (e) => {
    if (e.target === cartModal) cartModal.style.display = "none";
  });
</script>

</body>
</html>
